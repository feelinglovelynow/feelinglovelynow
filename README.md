# Feeling Lovely Now

#### Docs
- [Svelte](https://svelte.dev/docs)
- [SvelteKit](https://kit.svelte.dev/docs/introduction)
- [SvelteKit SVG](https://www.npmjs.com/package/@poppanator/sveltekit-svg)
- [Svelte Code Checker](https://www.npmjs.com/package/svelte-check)
- [Cloudflare Workers](https://kit.svelte.dev/docs/adapter-cloudflare-workers)
- [Cloudflare Workers KV](https://developers.cloudflare.com/workers/runtime-apis/kv)
- [Cloudflare Images](https://developers.cloudflare.com/images/)
- [Cloudflare Turnstile](https://developers.cloudflare.com/turnstile/)
- [Cloudflare Environments](https://developers.cloudflare.com/workers/wrangler/configuration/)
- [Cloudflare Compatibility Dates](https://developers.cloudflare.com/workers/configuration/compatibility-dates/#change-history)
- [Cloudflare API Docs](https://developers.cloudflare.com/api/operations/workers-kv-namespace-read-key-value-pair)
- [Cloudflare API Fundamentals](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/)
- [Cloudflare Custom Domains](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/)
- [Paypal Options](https://developer.paypal.com/sdk/js/reference/)
- [Paypal API](https://developer.paypal.com/docs/api/orders/v2/#orders_create)
- [Paypal JS](https://www.npmjs.com/package/@paypal/paypal-js)
- [Printful API](https://developers.printful.com/docs/#tag/Products-API)
- [Dgraph](https://dgraph.io/docs)
- [Dgraph Client](https://www.npmjs.com/package/dgraph-js-http)
- [JSDOC + Typescript](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html)
- [Zod](https://zod.dev/)
- [Validator](https://github.com/validatorjs/validator.js)
- [Sass](https://sass-lang.com/documentation/)
- [PNPM](https://pnpm.io/motivation)
- [Buffer](https://www.npmjs.com/package/buffer)
- [Vite](https://vitejs.dev/)
- [Wrangler](https://developers.cloudflare.com/workers/wrangler/)
- [Typescript](https://www.npmjs.com/package/typescript)
- [Markdown](https://www.markdownguide.org/basic-syntax)
- [Open Graph](https://ogp.me/)
- [CSP](https://w3c.github.io/webappsec-csp/)


#### Code Examples
- [Sveltekit + Turnstile](https://github.com/ghostdevv/svelte-turnstile)
- [Dgraph Client](https://github.com/dgraph-io/dgraph-js-http/tree/master/examples/simple)
- [Constructor Hover Typescript](https://stackoverflow.com/a/58461269/1549471)


#### Articles
- [NPM to PNPM](https://britishgeologicalsurvey.github.io/development/migrating-from-npm-to-pnpm/)
- [Cloudflare Worker Explanation](https://developers.cloudflare.com/workers/learning/how-workers-works)
- [Sveltekit + Sass](https://blog.hao.dev/how-to-add-scss-or-sass-to-sveltekit)
- [Cloudflare Global Network](https://www.cloudflare.com/network/)
- [Faster Websites](https://www.cloudflare.com/resources/images/slt3lc6tev37/1PdxTNFdaTagVJ1zxxTKCX/5fcc6da3f0a170414a8b8f9c7cd405d5/Getting_Faster_-_Performance_whitepaper.pdf)
- [Relative Time](https://www.js-howto.com/how-to-format-dates-with-intl-relativetimeformat/)
- [5 Ways to Maximize the Security, Performance and Reliability of Your Online Business](https://info.cloudflare.com/rs/713-XSC-918/images/Secure_Fast_Reliable_eBook.pdf)
- [Cloudflare + MailChannels + DKIM](https://mailchannels.zendesk.com/hc/en-us/articles/7122849237389)
- [Sveltekit page transitions](https://joshcollinsworth.com/blog/sveltekit-page-transitions#the-final-code)
- [SVG Viewbox](https://webdesign.tutsplus.com/svg-viewport-and-viewbox-for-beginners--cms-30844t)
- [Svelete Store + Local Storage](https://rodneylab.com/using-local-storage-sveltekit/)
- [Get Paypal Credentials](https://developer.paypal.com/api/rest/#get-credentials)
- [Customize Paypal Checkout Page](https://developer.paypal.com/api/nvp-soap/paypal-payments-standard/admin/checkout-settings/)
- [Transition between height 0 and auto](https://www.youtube.com/watch?v=B_n4YONte5A)
- [Best Practices for Returns and Refunds in eCommerce](https://www.clickpost.ai/blog/ecommerce-returns-best-practices)
- [SameSite cookies explained](https://web.dev/articles/samesite-cookies-explained)
- [Everything you always wanted to know about touch icons](https://mathiasbynens.be/notes/touch-icons)
- [Typescript + Browsers](https://medium.com/@salathielgenese/setup-typescript-for-modern-browser-a75d699673f6)


#### Utilities
- [Squoosh](https://squoosh.app)
- [SVG Icons](https://icones.js.org/collection/all)
- [Flowbite](https://flowbite-svelte.com/)
- [Jwt.io](https://jwt.io/)
- [White to Grey Hex's](https://www.htmlcolor-picker.com/color-groups/white-grey-black)
- [CSP Validator](https://csp-evaluator.withgoogle.com/)
- [DNS Checker](https://dnschecker.org)
- [Emoji's](https://www.iemoji.com/)
- [Open Graph Preview](https://www.opengraph.xyz)
- [Dgraph Forum](https://discuss.dgraph.io/)
- [SVG to PNG](https://svgtopng.com/)
- [SVG Formatter](https://htmlformatter.com/)
- [AI Image Generator](https://playgroundai.com/create)
- [AI Photo to Art](https://www.befunky.com/create/photo-to-art/)


#### Tech Stack Costs
- [MailChannels: FREE for Infinite Outbound API Emails/month](https://community.cloudflare.com/t/send-email-from-workers-using-mailchannels-for-free/361973)
- [Namecheap: $8.16/year for Domain Registration](https://www.namecheap.com/domains/)
- [Github Team: $4/month for 2G of storage](https://github.com/pricing)
- [Cloudflare Workers: $5/month for 285 servers allowing 10 million requests/month, 100,000 KV reads/day, 1,000 KV writes/day and 1 GB of KV storage allowed](https://developers.cloudflare.com/workers/platform/pricing)
- [Proton Business: $19.98/month for a secure email inbox, calendar, and 1,000GB of cloud storage](https://proton.me/business/plans)
- [Dgraph: $39.99 a month for 25GB of graph database storage, 5GB of data transfer per day and encryption at rest](https://dgraph.io/pricing)


#### Local install
1. [Install git](https://github.com/git-guides/install-git)
1. [Install node & npm](https://nodejs.org/en/download/)
1. [Install nvm](https://github.com/nvm-sh/nvm)
1. In [bash](https://opensource.com/resources/what-bash) navigate to the place you would love to place this code
```bash
git clone https://github.com/feelinglovelynow/feelinglovelynow.git
cd feelinglovelynow
nvm use 18
npm install -g pnpm
pnpm setup
source /Users/[ username ]/.zshrc
pnpm i
```


#### Start development server
```bash
pnpm dev
```


#### Validates code & then pushes to [github main branch](https://github.com/feelinglovelynow/feelinglovelynow/tree/main)
```bash
pnpm mainPush
```


#### Deploy to [production](https://feelinglovelynow.com)
```bash
pnpm mainDeploy
```


#### View logs for production server
```bash
pnpm mainLogs
```


#### View logs for qa server
```bash
pnpm qaLogs
```


#### [Updates all dependencies](https://pnpm.io/cli/update)
```bash
pnpm up
```


#### Set default tab size in [VSCodium](https://vscodium.com/) to 2 for new files
Preferences > Settings > JSON
```json
{
  "editor.tabSize": 2
}
```


#### Show what folder we are in @ the tab level of [VSCodium](https://vscodium.com/)
Preferences > Settings > JSON
```json
{
  "workbench.editor.labelFormat": "short"
}
```


#### Stop [VSCodium](https://vscodium.com/) from compacting folders in sidenav
Preferences > Settings > JSON
```json
{
  "explorer.compactFolders": false
}
```


#### Increase indent for sub folders in [VSCodium](https://vscodium.com/) sidenav
Preferences > Settings > JSON
```json
{
  "workbench.tree.indent": 18
}
```


#### Get project wide typescript reporting in [VSCodium](https://vscodium.com/)
Preferences > Settings > JSON
```json
{
 "typescript.tsserver.experimental.enableProjectDiagnostics": true
}
```


#### Show autocomplete suggestions in [VSCodium](https://vscodium.com/)
```
Control + Space
```


#### Reload [VSCodium](https://vscodium.com/)
This is helpful when type definitions are stale (showing incorrect errors)
```
Command + Shift + P
Developer: Reload Window
```


## How to create an NPM Package
1. Bash `mkdir example && cd example && pnpm init && pnpm i typescript -D && touch tsconfig.json`
1. If the `src` folder will have a class with private elements
```json
{ // https://www.typescriptlang.org/tsconfig
  "include": [
    "./src/**/*",
    "./tsc/SvelteCatch.d.ts",
  ],
  "compilerOptions": {
    "noEmit": true, // Do not emit compiler output files like JavaScript source code, source-maps or declarations.
    "allowJs": true, // Tells TypeScript to read JS files, as normally they are ignored as source files
    "checkJs": true, // Enable errors in JavaScript files
    "module": "ESNext", // Sets the module system for the program.
    "target": "ESNext",  // The target setting changes which JS features are downleveled and which are left intact.
  }
}
```
1. If the `src` folder will have a class with private elements define this file as `tsconfig.build.json`
1. If the `src` folder will not have a class with private elements define this file as `tsconfig.json`
```json
{ // https://www.typescriptlang.org/tsconfig
  "files": [],
  "compilerOptions": {
    "allowJs": true, // Tells TypeScript to read JS files, as normally they are ignored as source files
    "esModuleInterop": true, // https://www.typescriptlang.org/tsconfig#esModuleInterop
    "forceConsistentCasingInFileNames": true, // TypeScript will issue an error if a program tries to include a file by a casing different from the casing on disk.
    "sourceMap": true, // Enables the generation of sourcemap files. These files allow debuggers and other tools to display the original TypeScript source code when actually working with the emitted JavaScript files.
    "declaration": true, // Generate d.ts files
    "strict": true, // The strict flag enables a wide range of type checking behavior that results in stronger guarantees of program correctness.
    "outDir": "tsc", // Types should go into this directory. Removing this would place the .d.ts files next to the .js files
    "declarationMap": true, // go to js file when using IDE functions like "Go to Definition" in VSCode
    "module": "ESNext", // Sets the module system for the program.
    "target": "ES2015",  // The target setting changes which JS features are downleveled and which are left intact.
  }
}
```
1. Add `src` folder AND put `.js` or `.svetle` code in there AND ensure all imports w/in `src` have `.js` extension AND ensure no `exports` are `default`
1. IF adding a `typedefs.js` file and there are no imports in the file => at the end of the file add `export {}`
1. Create `./src/index.js` file and put all exports in there from `src` folder
1. IF svelte component is in `src` - Export in `index.js` like this: `export { default as Example } from './Example.svelte'`
1. Put all `src` files w/ `.js` extension into `tsconfig.build.json` or if that does not exist `tsconfig.json` files array
1. IF `tsconfig.build.json` exists: Bash `pnpm tsc -p tsconfig.build.json`
1. IF `tsconfig.build.json` does not exist: Bash `pnpm tsc`
1. Create `./src/index.ts` file and put all `.d.ts` exports in there from `tsc` folder (only put extension as `.d`)
1. If svelte component is in `src` - Export in `index.ts` like this: `export { default as Example } from './Example.svelte'`
1. Bash `pnpm i esbuild -D && touch esbuild.js`
```ts
import esbuild from 'esbuild'


esbuild.build({ // // https://esbuild.github.io/api/
  logLevel: 'info', // Show warnings, errors, and an output file summary. 
  sourcemap: true, // Source maps can make it easier to debug your code. They encode the information necessary to translate from a line/column offset in a generated output file back to a line/column offset in the corresponding original input file. 
  minify: true, // When enabled, the generated code will be minified instead of pretty-printed. 
  outdir: './dist', // Sets the output directory for the build operation.
  entryPoints: [ // This is an array of files that each serve as an input to the bundling algorithm.
    './tsc/DgraphTransaction.js',
    './tsc/enumContentType.js',
    './tsc/index.js',
    './tsc/typedefs.js',
  ],
})
```
1. Populate `esbuild.js` with all `.js` files that will go from the `tsc` folder to the the `dist` folder - [build options](https://esbuild.github.io/api/)
1. Bash `touch build.sh`
```bash
#!/bin/bash
rm -rf ./dist ./tsc &&
pnpm tsc &&
node ./esbuild.js &&
cp ./src/index.ts ./dist/index.ts
```
1. IF `tsconfig.build.json` exists: Replace the third line with `pnpm tsc -p tsconfig.build.json &&`
1. If svelte component is in `src` - add `cp` like this: `cp ./src/Example.svelte ./dist/Example.svelte`
1. Add MIT `LICENSE` to root folder
1. Remove `main` from `package.json`
1. Add `description` to `package.json`
1. Add to `package.json`
```json
{
  "author": "https://github.com/feelinglovelynow?tab=repositories",
  "license": "MIT",
  "type": "module",
  "types": "./dist/index.ts",
  "exports": "./dist/index.js",
  "files": [
    "dist",
    "tsc",
    "src"
  ],
  "keywords": [

  ],
  "scripts": {
    "build": "bash ./build.sh",
    "cloud": "pnpm build && pnpm publish --access public ."
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/feelinglovelynow/example.git"
  },
  "bugs": {
    "url": "https://github.com/feelinglovelynow/example/issues"
  }
}
```
1. Update `package.json` [ `name`, `keywords`, `repository`, `bugs` ]
1. If there is a `svelte` component in this package add to `package.json` - [guidance](https://github.com/hperrin/svelte-material-ui/issues/375)
```json
{
  "main": "./dist/index.js",
  "svelte": "./dist/index.js",
}
```
1. Bash `pnpm build && touch .gitignore`
```toml
dist
node_modules
tsc
```
1. Bash `pnpm build`
1. In another app link to this package locally `"example": "link:../../example"`
1. Publish package to npm


### Publish package to npm
```bash
pnpm whoami
pnpm login
pnpm publish --access public .
```


## Deprecate an npm package
```bash
npm deprecate @sensethenlove/toast@1.x "This project has been renamed. Install using @feelinglovelynow/toast instead."
```
